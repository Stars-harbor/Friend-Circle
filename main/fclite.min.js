function initialize_fc_lite(){const e=document.getElementById("friend-circle-lite-root");if(!e)return;e.innerHTML="";const t=document.createElement("div");t.id="random-article",e.appendChild(t);const n=document.createElement("div");n.className="articles-container",n.id="articles-container",e.appendChild(n);const i=document.createElement("button");i.id="load-more-btn",i.innerText="显示更多",e.appendChild(i);const a=document.createElement("div");a.id="modal",a.className="modal",a.innerHTML='\n        <div class="modal-content">\n            <img id="modal-author-avatar" src="" alt="">\n            <a id="modal-author-name-link"></a>\n            <div id="modal-articles-container"></div>\n        </div>\n    ',document.body.appendChild(a);const o=document.createElement("div");o.id="stats-container",e.appendChild(o);let r=0,d=[];function c(){const e=localStorage.getItem("friend-circle-lite-cache-time"),t=(new Date).getTime();if(e&&t-e<6e5){const e=JSON.parse(localStorage.getItem("friend-circle-lite-cache"));if(e)return void l(e)}fetch(`${UserConfig.private_api_url}all.json`).then(e=>e.json()).then(e=>{localStorage.setItem("friend-circle-lite-cache",JSON.stringify(e)),localStorage.setItem("friend-circle-lite-cache-time",t.toString()),l(e)}).finally(()=>{i.innerText="显示更多"})}function l(e){d=e.article_data;const a=e.statistical_data;o.innerHTML=`\n            <div>Powered by: <a href="https://github.com/willow-god/Friend-Circle-Lite" target="_blank">FriendCircleLite</a><br></div>\n            <div>Designed By: <a href="https://www.qyliu.top/" target="_blank">LiuShen</a><br></div>\n            <div>订阅:${a.friends_num}   活跃:${a.active_num}   总文章数:${a.article_num}<br></div>\n            <div>更新时间:${a.last_updated_time}</div>\n        `;const c=d[Math.floor(Math.random()*d.length)];t.innerHTML=`\n            <div class="random-container">\n                <div class="random-container-title">随机钓鱼</div>\n                <div class="random-title">${c.title}</div>\n                <div class="random-author">作者: ${c.author}</div>\n            </div>\n            <button class="random-link-button" onclick="window.open('${c.link}', '_blank')">过去转转</button>\n        `,d.slice(r,r+UserConfig.page_turning_number).forEach(e=>{const t=document.createElement("div");t.className="card";const i=document.createElement("div");i.className="card-title",i.innerText=e.title,t.appendChild(i),i.onclick=(()=>window.open(e.link,"_blank"));const a=document.createElement("div");a.className="card-author";const o=document.createElement("img");o.className="no-lightbox",o.src=e.avatar||UserConfig.error_img,o.onerror=(()=>o.src=UserConfig.error_img),a.appendChild(o),a.appendChild(document.createTextNode(e.author)),t.appendChild(a),a.onclick=(()=>{!function(e,t,n){const i=document.getElementById("modal"),a=document.getElementById("modal-articles-container"),o=document.getElementById("modal-author-avatar"),r=document.getElementById("modal-author-name-link");a.innerHTML="",o.src=t||UserConfig.error_img,o.onerror=(()=>o.src=UserConfig.error_img),r.innerText=e,r.href=new URL(n).origin,d.filter(t=>t.author===e).forEach(e=>{const t=document.createElement("div");t.className="modal-article";const n=document.createElement("a");n.className="modal-article-title",n.innerText=e.title,n.href=e.link,n.target="_blank",t.appendChild(n);const i=document.createElement("div");i.className="modal-article-date",i.innerText="--"+e.created.substring(0,10),t.appendChild(i),a.appendChild(t)}),i.style.display="block",setTimeout(()=>{i.classList.add("modal-open")},10)}(e.author,e.avatar,e.link)});const r=document.createElement("div");r.className="card-date",r.innerText=e.created.substring(0,10),t.appendChild(r);const c=document.createElement("img");c.className="card-bg no-lightbox",c.src=e.avatar||UserConfig.error_img,c.onerror=(()=>c.src=UserConfig.error_img),t.appendChild(c),n.appendChild(t)}),(r+=UserConfig.page_turning_number)>=d.length&&(i.style.display="none")}c(),i.addEventListener("click",c),window.onclick=function(e){const t=document.getElementById("modal");e.target===t&&function(){const e=document.getElementById("modal");e.classList.remove("modal-open"),e.addEventListener("transitionend",()=>{e.style.display="none"},{once:!0})}()}}document.addEventListener("DOMContentLoaded",function(){setTimeout(initialize_fc_lite,0)}),document.addEventListener("pjax:complete",function(){setTimeout(initialize_fc_lite,0)}),setTimeout(initialize_fc_lite,0);